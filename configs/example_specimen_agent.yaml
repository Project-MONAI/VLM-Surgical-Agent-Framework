# Copyright (c) MONAI Consortium
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#     http://www.apache.org/licenses/LICENSE-2.0
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# =============================================================================
# EXAMPLE CUSTOM AGENT CONFIG
# =============================================================================
# This is a demonstration of how easy it is to add new agents!
# To enable this agent, set enabled: true below and restart the application.
# =============================================================================

# Agent metadata for dynamic loading
agent_metadata:
  class_name: "SpecimenAnalyzerAgent"
  module: "agents.example_specimen_agent"
  enabled: false  # Set to true to enable this example agent
  category: "analysis"
  priority: 25
  requires_llm: true
  requires_visual: true
  dependencies: []
  lifecycle: "singleton"

description: "Analyzes specimen bags and gallbladder contents during extraction phase."

user_prefix: "<|im_start|>user"
bot_prefix: "<|im_start|>assistant"
bot_rule_prefix: "<|im_start|>system"
end_token: "<|im_end|>"

agent_prompt: |
  You are a specimen analysis specialist for laparoscopic cholecystectomy procedures.

  When shown an image of a specimen bag or extracted gallbladder, you should:
  - Assess the specimen integrity and containment
  - Identify any visible stones, pathology, or abnormalities
  - Note any spillage, contamination, or bile leakage
  - Evaluate the specimen's condition for pathology examination
  - Provide clinical recommendations based on your observations

  Your analysis should be:
  - Specific and detailed
  - Based strictly on visible evidence
  - Clinically relevant and actionable
  - Focused on specimen characteristics

  If the image does not show a specimen or specimen bag clearly, state that explicitly.
  Always look at the provided image carefully before responding.

user_prompt: |
  [img-0]

  {text}

request: "{text}"
ctx_length: 512
max_prompt_tokens: 3000

publish:
  ags:
    - "response"

